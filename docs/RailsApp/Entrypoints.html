<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Crystal Docs 1.10.1">
<meta name="crystal_docs.project_version" content="main">
<meta name="crystal_docs.project_name" content="rails_app_operator">



<link href="../css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../js/doc.js"></script>

  <meta name="repository-name" content="rails_app_operator">
  <title>RailsApp::Entrypoints - rails_app_operator main</title>
  <script type="text/javascript">
    CrystalDocs.base_path = "../";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill="currentColor" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<input type="checkbox" id="sidebar-btn">
<label for="sidebar-btn" id="sidebar-btn-label">
  <svg class="open" xmlns="http://www.w3.org/2000/svg" height="2em" width="2em" viewBox="0 0 512 512"><title>Open Sidebar</title><path fill="currentColor" d="M80 96v64h352V96H80zm0 112v64h352v-64H80zm0 112v64h352v-64H80z"></path></svg>
  <svg class="close" xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 512 512"><title>Close Sidebar</title><path fill="currentColor" d="m118.6 73.4-45.2 45.2L210.7 256 73.4 393.4l45.2 45.2L256 301.3l137.4 137.3 45.2-45.2L301.3 256l137.3-137.4-45.2-45.2L256 210.7Z"></path></svg>
</label>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="../index.html">
          rails_app_operator
        </a>
      </h1>

      <span class="project-version">
        main
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" " data-id="rails_app_operator/toplevel" data-name="top level namespace">
      <a href="../toplevel.html">Top Level Namespace</a>
      
    </li>
  
  <li class="parent open current" data-id="rails_app_operator/RailsApp" data-name="railsapp">
      <a href="../RailsApp.html">RailsApp</a>
      
        <ul>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/BeforeCreate" data-name="railsapp::beforecreate">
      <a href="../RailsApp/BeforeCreate.html">BeforeCreate</a>
      
        <ul>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/BeforeCreate/Env" data-name="railsapp::beforecreate::env">
      <a href="../RailsApp/BeforeCreate/Env.html">Env</a>
      
        <ul>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/BeforeCreate/Env/ValueFrom" data-name="railsapp::beforecreate::env::valuefrom">
      <a href="../RailsApp/BeforeCreate/Env/ValueFrom.html">ValueFrom</a>
      
        <ul>
  
  <li class=" " data-id="rails_app_operator/RailsApp/BeforeCreate/Env/ValueFrom/ConfigMapKeyRef" data-name="railsapp::beforecreate::env::valuefrom::configmapkeyref">
      <a href="../RailsApp/BeforeCreate/Env/ValueFrom/ConfigMapKeyRef.html">ConfigMapKeyRef</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/BeforeCreate/Env/ValueFrom/FieldRef" data-name="railsapp::beforecreate::env::valuefrom::fieldref">
      <a href="../RailsApp/BeforeCreate/Env/ValueFrom/FieldRef.html">FieldRef</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/BeforeCreate/Env/ValueFrom/SecretKeyRef" data-name="railsapp::beforecreate::env::valuefrom::secretkeyref">
      <a href="../RailsApp/BeforeCreate/Env/ValueFrom/SecretKeyRef.html">SecretKeyRef</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/BeforeCreate/EnvFrom" data-name="railsapp::beforecreate::envfrom">
      <a href="../RailsApp/BeforeCreate/EnvFrom.html">EnvFrom</a>
      
        <ul>
  
  <li class=" " data-id="rails_app_operator/RailsApp/BeforeCreate/EnvFrom/ConfigMapRef" data-name="railsapp::beforecreate::envfrom::configmapref">
      <a href="../RailsApp/BeforeCreate/EnvFrom/ConfigMapRef.html">ConfigMapRef</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/BeforeCreate/EnvFrom/SecretRef" data-name="railsapp::beforecreate::envfrom::secretref">
      <a href="../RailsApp/BeforeCreate/EnvFrom/SecretRef.html">SecretRef</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/BeforeUpdate" data-name="railsapp::beforeupdate">
      <a href="../RailsApp/BeforeUpdate.html">BeforeUpdate</a>
      
        <ul>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/BeforeUpdate/Env" data-name="railsapp::beforeupdate::env">
      <a href="../RailsApp/BeforeUpdate/Env.html">Env</a>
      
        <ul>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/BeforeUpdate/Env/ValueFrom" data-name="railsapp::beforeupdate::env::valuefrom">
      <a href="../RailsApp/BeforeUpdate/Env/ValueFrom.html">ValueFrom</a>
      
        <ul>
  
  <li class=" " data-id="rails_app_operator/RailsApp/BeforeUpdate/Env/ValueFrom/ConfigMapKeyRef" data-name="railsapp::beforeupdate::env::valuefrom::configmapkeyref">
      <a href="../RailsApp/BeforeUpdate/Env/ValueFrom/ConfigMapKeyRef.html">ConfigMapKeyRef</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/BeforeUpdate/Env/ValueFrom/FieldRef" data-name="railsapp::beforeupdate::env::valuefrom::fieldref">
      <a href="../RailsApp/BeforeUpdate/Env/ValueFrom/FieldRef.html">FieldRef</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/BeforeUpdate/Env/ValueFrom/SecretKeyRef" data-name="railsapp::beforeupdate::env::valuefrom::secretkeyref">
      <a href="../RailsApp/BeforeUpdate/Env/ValueFrom/SecretKeyRef.html">SecretKeyRef</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/BeforeUpdate/EnvFrom" data-name="railsapp::beforeupdate::envfrom">
      <a href="../RailsApp/BeforeUpdate/EnvFrom.html">EnvFrom</a>
      
        <ul>
  
  <li class=" " data-id="rails_app_operator/RailsApp/BeforeUpdate/EnvFrom/ConfigMapRef" data-name="railsapp::beforeupdate::envfrom::configmapref">
      <a href="../RailsApp/BeforeUpdate/EnvFrom/ConfigMapRef.html">ConfigMapRef</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/BeforeUpdate/EnvFrom/SecretRef" data-name="railsapp::beforeupdate::envfrom::secretref">
      <a href="../RailsApp/BeforeUpdate/EnvFrom/SecretRef.html">SecretRef</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/Directories" data-name="railsapp::directories">
      <a href="../RailsApp/Directories.html">Directories</a>
      
        <ul>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Directories/Files" data-name="railsapp::directories::files">
      <a href="../RailsApp/Directories/Files.html">Files</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Directories/PersistentStorage" data-name="railsapp::directories::persistentstorage">
      <a href="../RailsApp/Directories/PersistentStorage.html">PersistentStorage</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent open current" data-id="rails_app_operator/RailsApp/Entrypoints" data-name="railsapp::entrypoints">
      <a href="../RailsApp/Entrypoints.html">Entrypoints</a>
      
        <ul>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Entrypoints/DeploymentStrategy" data-name="railsapp::entrypoints::deploymentstrategy">
      <a href="../RailsApp/Entrypoints/DeploymentStrategy.html">DeploymentStrategy</a>
      
    </li>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/Entrypoints/Env" data-name="railsapp::entrypoints::env">
      <a href="../RailsApp/Entrypoints/Env.html">Env</a>
      
        <ul>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/Entrypoints/Env/ValueFrom" data-name="railsapp::entrypoints::env::valuefrom">
      <a href="../RailsApp/Entrypoints/Env/ValueFrom.html">ValueFrom</a>
      
        <ul>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Entrypoints/Env/ValueFrom/ConfigMapKeyRef" data-name="railsapp::entrypoints::env::valuefrom::configmapkeyref">
      <a href="../RailsApp/Entrypoints/Env/ValueFrom/ConfigMapKeyRef.html">ConfigMapKeyRef</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Entrypoints/Env/ValueFrom/FieldRef" data-name="railsapp::entrypoints::env::valuefrom::fieldref">
      <a href="../RailsApp/Entrypoints/Env/ValueFrom/FieldRef.html">FieldRef</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Entrypoints/Env/ValueFrom/SecretKeyRef" data-name="railsapp::entrypoints::env::valuefrom::secretkeyref">
      <a href="../RailsApp/Entrypoints/Env/ValueFrom/SecretKeyRef.html">SecretKeyRef</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/Entrypoints/EnvFrom" data-name="railsapp::entrypoints::envfrom">
      <a href="../RailsApp/Entrypoints/EnvFrom.html">EnvFrom</a>
      
        <ul>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Entrypoints/EnvFrom/ConfigMapRef" data-name="railsapp::entrypoints::envfrom::configmapref">
      <a href="../RailsApp/Entrypoints/EnvFrom/ConfigMapRef.html">ConfigMapRef</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Entrypoints/EnvFrom/SecretRef" data-name="railsapp::entrypoints::envfrom::secretref">
      <a href="../RailsApp/Entrypoints/EnvFrom/SecretRef.html">SecretRef</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Entrypoints/HealthCheck" data-name="railsapp::entrypoints::healthcheck">
      <a href="../RailsApp/Entrypoints/HealthCheck.html">HealthCheck</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Entrypoints/Ingress" data-name="railsapp::entrypoints::ingress">
      <a href="../RailsApp/Entrypoints/Ingress.html">Ingress</a>
      
    </li>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/Entrypoints/Resources" data-name="railsapp::entrypoints::resources">
      <a href="../RailsApp/Entrypoints/Resources.html">Resources</a>
      
        <ul>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Entrypoints/Resources/Limits" data-name="railsapp::entrypoints::resources::limits">
      <a href="../RailsApp/Entrypoints/Resources/Limits.html">Limits</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Entrypoints/Resources/Requests" data-name="railsapp::entrypoints::resources::requests">
      <a href="../RailsApp/Entrypoints/Resources/Requests.html">Requests</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/Env" data-name="railsapp::env">
      <a href="../RailsApp/Env.html">Env</a>
      
        <ul>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/Env/ValueFrom" data-name="railsapp::env::valuefrom">
      <a href="../RailsApp/Env/ValueFrom.html">ValueFrom</a>
      
        <ul>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Env/ValueFrom/ConfigMapKeyRef" data-name="railsapp::env::valuefrom::configmapkeyref">
      <a href="../RailsApp/Env/ValueFrom/ConfigMapKeyRef.html">ConfigMapKeyRef</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Env/ValueFrom/FieldRef" data-name="railsapp::env::valuefrom::fieldref">
      <a href="../RailsApp/Env/ValueFrom/FieldRef.html">FieldRef</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/Env/ValueFrom/SecretKeyRef" data-name="railsapp::env::valuefrom::secretkeyref">
      <a href="../RailsApp/Env/ValueFrom/SecretKeyRef.html">SecretKeyRef</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="rails_app_operator/RailsApp/EnvFrom" data-name="railsapp::envfrom">
      <a href="../RailsApp/EnvFrom.html">EnvFrom</a>
      
        <ul>
  
  <li class=" " data-id="rails_app_operator/RailsApp/EnvFrom/ConfigMapRef" data-name="railsapp::envfrom::configmapref">
      <a href="../RailsApp/EnvFrom/ConfigMapRef.html">ConfigMapRef</a>
      
    </li>
  
  <li class=" " data-id="rails_app_operator/RailsApp/EnvFrom/SecretRef" data-name="railsapp::envfrom::secretref">
      <a href="../RailsApp/EnvFrom/SecretRef.html">SecretRef</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">struct</span> RailsApp::<wbr>Entrypoints

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="../RailsApp/Entrypoints.html">RailsApp::Entrypoints</a></li><li class="superclass">Struct</li><li class="superclass">Value</li><li class="superclass">Object</li></ul>




  <h2>
    <a id="overview" class="anchor" href="#overview">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Overview
  </h2>

  <p>The entrypoints for your application — each type of process
you run, such as a Rails server and Sidekiq, is a separate
entrypoint. This is similar to entries in a <code>Procfile</code>.</p>





  <h2>
    <a id="included-modules" class="anchor" href="#included-modules">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Included Modules
  </h2>
  <ul class="other-types-list">
    
      <li class="other-type">JSON::Serializable</li>
    
      <li class="other-type">Kubernetes::Serializable</li>
    
      <li class="other-type">YAML::Serializable</li>
    
  </ul>










  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  
    
      <a href="https://github.com/jgaskins/rails_app_operator/blob/main/src/rails_app_operator.cr#L101" target="_blank">
        rails_app_operator.cr
      </a>
    
    <br/>
  





  <h2>
    <a id="constructors" class="anchor" href="#constructors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Constructors
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#new%28ctx%3AYAML%3A%3AParseContext%2Cnode%3AYAML%3A%3ANodes%3A%3ANode%29-class-method" class="signature"><strong>.new</strong>(ctx : YAML::ParseContext, node : YAML::Nodes::Node)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#new%28pull%3AJSON%3A%3APullParser%29-class-method" class="signature"><strong>.new</strong>(pull : JSON::PullParser)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#new%28%2A%2Cname%3AString%2Cimage%3ANil%7CString%3Dnil%2Ccommand%3ANil%7CArray%28String%29%3Dnil%2Cport%3AInt64%7CNil%3Dnil%2Cdomain%3ANil%7CString%3Dnil%2Cdomains%3ANil%7CArray%28String%29%3Dnil%2Cpath%3AString%3D%22/%22%2Cpath_type%3AString%3D%22Prefix%22%2Creplicas%3AInt64%3D1%2Cdeployment_strategy%3ARailsApp%3A%3AEntrypoints%3A%3ADeploymentStrategy%3D%7B%7DofString%3D%3EJSON%3A%3AAny%2Cresources%3ARailsApp%3A%3AEntrypoints%3A%3AResources%7CNil%3Dnil%2Cnode_selector%3AHash%28String%2CJSON%3A%3AAny%29%3D%7B%7DofString%3D%3EJSON%3A%3AAny%2Cannotations%3AHash%28String%2CJSON%3A%3AAny%29%3D%7B%7DofString%3D%3EJSON%3A%3AAny%2Chealth_check%3ARailsApp%3A%3AEntrypoints%3A%3AHealthCheck%7CNil%3Dnil%2Cingress%3ARailsApp%3A%3AEntrypoints%3A%3AIngress%7CNil%3Dnil%2Cenv_from%3AArray%28RailsApp%3A%3AEntrypoints%3A%3AEnvFrom%29%3DArray%28EnvFrom%29.new%2Cenv%3AArray%28RailsApp%3A%3AEntrypoints%3A%3AEnv%29%3DArray%28Env%29.new%2Cservice_account%3ANil%7CString%3Dnil%29-class-method" class="signature"><strong>.new</strong>(*, name : String, image : Nil | String = <span class="n">nil</span>, command : Nil | Array(String) = <span class="n">nil</span>, port : Int64 | Nil = <span class="n">nil</span>, domain : Nil | String = <span class="n">nil</span>, domains : Nil | Array(String) = <span class="n">nil</span>, path : String = <span class="s">&quot;/&quot;</span>, path_type : String = <span class="s">&quot;Prefix&quot;</span>, replicas : Int64 = <span class="n">1</span>, deployment_strategy : RailsApp::Entrypoints::DeploymentStrategy = {} <span class="k">of</span> <span class="t">String</span> <span class="o">=&gt;</span> <span class="t">JSON</span><span class="t">::</span><span class="t">Any</span>, resources : RailsApp::Entrypoints::Resources | Nil = <span class="n">nil</span>, node_selector : Hash(String, JSON::Any) = {} <span class="k">of</span> <span class="t">String</span> <span class="o">=&gt;</span> <span class="t">JSON</span><span class="t">::</span><span class="t">Any</span>, annotations : Hash(String, JSON::Any) = {} <span class="k">of</span> <span class="t">String</span> <span class="o">=&gt;</span> <span class="t">JSON</span><span class="t">::</span><span class="t">Any</span>, health_check : RailsApp::Entrypoints::HealthCheck | Nil = <span class="n">nil</span>, ingress : RailsApp::Entrypoints::Ingress | Nil = <span class="n">nil</span>, env_from : Array(RailsApp::Entrypoints::EnvFrom) = <span class="t">Array</span>(<span class="t">EnvFrom</span>).new, env : Array(RailsApp::Entrypoints::Env) = <span class="t">Array</span>(<span class="t">Env</span>).new, service_account : Nil | String = <span class="n">nil</span>)</a>
        
      </li>
    
  </ul>







  <h2>
    <a id="instance-method-summary" class="anchor" href="#instance-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#annotations%3AHash%28String%2CJSON%3A%3AAny%29-instance-method" class="signature"><strong>#annotations</strong> : Hash(String, JSON::Any)</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#command%3AArray%28String%29%7CNil-instance-method" class="signature"><strong>#command</strong> : Array(String) | Nil</a>
        
          <div class="summary"><p>Optional override for the command to run to run this entrypoint if it differs from the <code>CMD</code> directive in your container image.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#deployment_strategy%3ADeploymentStrategy-instance-method" class="signature"><strong>#deployment_strategy</strong> : DeploymentStrategy</a>
        
          <div class="summary"><p>The strategy to use when updating this entrypoint, useful for slow canary rollouts.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#domain%3AString%7CNil-instance-method" class="signature"><strong>#domain</strong> : String | Nil</a>
        
          <div class="summary"><p>The domain your app should be accessible on.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#domains%3AArray%28String%29%7CNil-instance-method" class="signature"><strong>#domains</strong> : Array(String) | Nil</a>
        
          <div class="summary"><p>The domains your app should be accessible on.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#env%3AArray%28Env%29-instance-method" class="signature"><strong>#env</strong> : Array(Env)</a>
        
          <div class="summary"><p>A list of <code><a href="../RailsApp/Entrypoints/Env.html">Env</a></code> objects representing environment variables.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#env_from%3AArray%28EnvFrom%29-instance-method" class="signature"><strong>#env_from</strong> : Array(EnvFrom)</a>
        
          <div class="summary"><p>The source of an environment variable, such as a <code>ConfigMap</code> or <code>Secret</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#health_check%3AHealthCheck%7CNil-instance-method" class="signature"><strong>#health_check</strong> : HealthCheck | Nil</a>
        
          <div class="summary"><p>HTTP health checks to ensure 2 things:</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#image%3AString%7CNil-instance-method" class="signature"><strong>#image</strong> : String | Nil</a>
        
          <div class="summary"><p>Optional override for the container image for this entrypoint if it differs from the rest of your app.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#ingress%3AIngress%7CNil-instance-method" class="signature"><strong>#ingress</strong> : Ingress | Nil</a>
        
          <div class="summary"><p>Properties to assign to any <code><a href="../RailsApp/Entrypoints/Ingress.html">Ingress</a></code> that gets created for this entrypoint.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#name%3AString-instance-method" class="signature"><strong>#name</strong> : String</a>
        
          <div class="summary"><p>The name of your entrypoint, such as <code>web</code> or <code>worker</code></p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#node_selector%3AHash%28String%2CJSON%3A%3AAny%29-instance-method" class="signature"><strong>#node_selector</strong> : Hash(String, JSON::Any)</a>
        
          <div class="summary"><p>A <code>Hash(String, String)</code> containing label/value pairs — pods for this <code><a href="../RailsApp.html">RailsApp</a></code> or <code><a href="../RailsApp/Entrypoints.html">Entrypoints</a></code> will only be assigned to nodes that have these labels.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#path%3AString-instance-method" class="signature"><strong>#path</strong> : String</a>
        
          <div class="summary"><p>The path matcher for the <code><a href="../RailsApp/Entrypoints/Ingress.html">Ingress</a></code> resource, defaults to <code>&quot;/&quot;</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#path_type%3AString-instance-method" class="signature"><strong>#path_type</strong> : String</a>
        
          <div class="summary"><p>Defines the way the <code><a href="../RailsApp/Entrypoints.html#path%3AString-instance-method">#path</a></code> is matched, defaulting to <code>Prefix</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#port%3AInt64%7CNil-instance-method" class="signature"><strong>#port</strong> : Int64 | Nil</a>
        
          <div class="summary"><p>The port your entrypoint will be listening on.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#replicas%3AInt64-instance-method" class="signature"><strong>#replicas</strong> : Int64</a>
        
          <div class="summary"><p>The number of pods to run for this entrypoint, defaulting to <code>1</code>.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#resources%3AResources%7CNil-instance-method" class="signature"><strong>#resources</strong> : Resources | Nil</a>
        
          <div class="summary"><p>The resources you want to allocate for each pod and/or limit each pod to.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#service_account%3AString%7CNil-instance-method" class="signature"><strong>#service_account</strong> : String | Nil</a>
        
          <div class="summary"><p>Use the given Kubernetes <code>ServiceAccount</code> to run pods for this app.</p></div>
        
      </li>
    
  </ul>



<div class="methods-inherited">
  
    


    


    


    


  
    


    


    


    


  
    


    


    


    


  
    


    


    


    


  
    


    


    


    


  
    


    


    


    


  
</div>


  <h2>
    <a id="constructor-detail" class="anchor" href="#constructor-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Constructor Detail
  </h2>
  
    <div class="entry-detail" id="new(ctx:YAML::ParseContext,node:YAML::Nodes::Node)-class-method">
      <div class="signature">
        
        def self.<strong>new</strong>(ctx : YAML::ParseContext, node : YAML::Nodes::Node)

        <a class="method-permalink" href="#new%28ctx%3AYAML%3A%3AParseContext%2Cnode%3AYAML%3A%3ANodes%3A%3ANode%29-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="new(pull:JSON::PullParser)-class-method">
      <div class="signature">
        
        def self.<strong>new</strong>(pull : JSON::PullParser)

        <a class="method-permalink" href="#new%28pull%3AJSON%3A%3APullParser%29-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="new(*,name:String,image:Nil|String=nil,command:Nil|Array(String)=nil,port:Int64|Nil=nil,domain:Nil|String=nil,domains:Nil|Array(String)=nil,path:String=&quot;/&quot;,path_type:String=&quot;Prefix&quot;,replicas:Int64=1,deployment_strategy:RailsApp::Entrypoints::DeploymentStrategy={}ofString=&gt;JSON::Any,resources:RailsApp::Entrypoints::Resources|Nil=nil,node_selector:Hash(String,JSON::Any)={}ofString=&gt;JSON::Any,annotations:Hash(String,JSON::Any)={}ofString=&gt;JSON::Any,health_check:RailsApp::Entrypoints::HealthCheck|Nil=nil,ingress:RailsApp::Entrypoints::Ingress|Nil=nil,env_from:Array(RailsApp::Entrypoints::EnvFrom)=Array(EnvFrom).new,env:Array(RailsApp::Entrypoints::Env)=Array(Env).new,service_account:Nil|String=nil)-class-method">
      <div class="signature">
        
        def self.<strong>new</strong>(*, name : String, image : Nil | String = <span class="n">nil</span>, command : Nil | Array(String) = <span class="n">nil</span>, port : Int64 | Nil = <span class="n">nil</span>, domain : Nil | String = <span class="n">nil</span>, domains : Nil | Array(String) = <span class="n">nil</span>, path : String = <span class="s">&quot;/&quot;</span>, path_type : String = <span class="s">&quot;Prefix&quot;</span>, replicas : Int64 = <span class="n">1</span>, deployment_strategy : <a href="../RailsApp/Entrypoints/DeploymentStrategy.html">RailsApp::Entrypoints::DeploymentStrategy</a> = {} <span class="k">of</span> <span class="t">String</span> <span class="o">=&gt;</span> <span class="t">JSON</span><span class="t">::</span><span class="t">Any</span>, resources : <a href="../RailsApp/Entrypoints/Resources.html">RailsApp::Entrypoints::Resources</a> | Nil = <span class="n">nil</span>, node_selector : Hash(String, JSON::Any) = {} <span class="k">of</span> <span class="t">String</span> <span class="o">=&gt;</span> <span class="t">JSON</span><span class="t">::</span><span class="t">Any</span>, annotations : Hash(String, JSON::Any) = {} <span class="k">of</span> <span class="t">String</span> <span class="o">=&gt;</span> <span class="t">JSON</span><span class="t">::</span><span class="t">Any</span>, health_check : <a href="../RailsApp/Entrypoints/HealthCheck.html">RailsApp::Entrypoints::HealthCheck</a> | Nil = <span class="n">nil</span>, ingress : <a href="../RailsApp/Entrypoints/Ingress.html">RailsApp::Entrypoints::Ingress</a> | Nil = <span class="n">nil</span>, env_from : Array(<a href="../RailsApp/Entrypoints/EnvFrom.html">RailsApp::Entrypoints::EnvFrom</a>) = <span class="t">Array</span>(<span class="t">EnvFrom</span>).new, env : Array(<a href="../RailsApp/Entrypoints/Env.html">RailsApp::Entrypoints::Env</a>) = <span class="t">Array</span>(<span class="t">Env</span>).new, service_account : Nil | String = <span class="n">nil</span>)

        <a class="method-permalink" href="#new%28%2A%2Cname%3AString%2Cimage%3ANil%7CString%3Dnil%2Ccommand%3ANil%7CArray%28String%29%3Dnil%2Cport%3AInt64%7CNil%3Dnil%2Cdomain%3ANil%7CString%3Dnil%2Cdomains%3ANil%7CArray%28String%29%3Dnil%2Cpath%3AString%3D%22/%22%2Cpath_type%3AString%3D%22Prefix%22%2Creplicas%3AInt64%3D1%2Cdeployment_strategy%3ARailsApp%3A%3AEntrypoints%3A%3ADeploymentStrategy%3D%7B%7DofString%3D%3EJSON%3A%3AAny%2Cresources%3ARailsApp%3A%3AEntrypoints%3A%3AResources%7CNil%3Dnil%2Cnode_selector%3AHash%28String%2CJSON%3A%3AAny%29%3D%7B%7DofString%3D%3EJSON%3A%3AAny%2Cannotations%3AHash%28String%2CJSON%3A%3AAny%29%3D%7B%7DofString%3D%3EJSON%3A%3AAny%2Chealth_check%3ARailsApp%3A%3AEntrypoints%3A%3AHealthCheck%7CNil%3Dnil%2Cingress%3ARailsApp%3A%3AEntrypoints%3A%3AIngress%7CNil%3Dnil%2Cenv_from%3AArray%28RailsApp%3A%3AEntrypoints%3A%3AEnvFrom%29%3DArray%28EnvFrom%29.new%2Cenv%3AArray%28RailsApp%3A%3AEntrypoints%3A%3AEnv%29%3DArray%28Env%29.new%2Cservice_account%3ANil%7CString%3Dnil%29-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/jgaskins/rails_app_operator/blob/main/src/rails_app_operator.cr#L101" target="_blank">View source</a>]
        
      </div>
    </div>
  







  <h2>
    <a id="instance-method-detail" class="anchor" href="#instance-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Detail
  </h2>
  
    <div class="entry-detail" id="annotations:Hash(String,JSON::Any)-instance-method">
      <div class="signature">
        
        def <strong>annotations</strong> : Hash(String, JSON::Any)

        <a class="method-permalink" href="#annotations%3AHash%28String%2CJSON%3A%3AAny%29-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="command:Array(String)|Nil-instance-method">
      <div class="signature">
        
        def <strong>command</strong> : Array(String) | Nil

        <a class="method-permalink" href="#command%3AArray%28String%29%7CNil-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Optional override for the command to run to run this entrypoint if it differs from the <code>CMD</code> directive in your container image. For example, to run Sidekiq:</p>
<pre><code class="language-crystal">command: [bundle, exec, sidekiq]</code></pre>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="deployment_strategy:DeploymentStrategy-instance-method">
      <div class="signature">
        
        def <strong>deployment_strategy</strong> : <a href="../RailsApp/Entrypoints/DeploymentStrategy.html">DeploymentStrategy</a>

        <a class="method-permalink" href="#deployment_strategy%3ADeploymentStrategy-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>The strategy to use when updating this entrypoint, useful for slow canary rollouts.</p>
<p>When you need to deploy your app safely, it can be best to roll it out slowly over several minutes. If your first few pods fail health checks, the deployment will pause. You can then use <code>kubectl rollout undo deployment</code> in your deployment script to roll the deployment back.</p>
<p>How those health checks fail is specific to your app, but a useful pattern is for the pod to track the number of failures (for example, the number of HTTP 500s or exceptions raised in background jobs) as a percentage of all units of work since the pod started and, when that number exceeds some threshold (for example, 5%), return a failure response for the health check.</p>
<pre><code class="language-yaml">deployment_strategy:
  duration_minutes: 10
  surge: 5%
  max_unavailable: 0%</code></pre>
<p><span class="flag yellow">WARNING</span>  This is an experimental property and is subject to change.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="domain:String|Nil-instance-method">
      <div class="signature">
        
        def <strong>domain</strong> : String | Nil

        <a class="method-permalink" href="#domain%3AString%7CNil-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>The domain your app should be accessible on. This will provision <code><a href="../RailsApp/Entrypoints/Ingress.html">Ingress</a></code> and <code>Certificate</code> resources so that this entrypoint will be reachable via the public internet. Without this property or <code><a href="../RailsApp/Entrypoints.html#domains%3AArray%28String%29%7CNil-instance-method">#domains</a></code>, it will only be accessible via plaintext inside the cluster.</p>
<p>If <code><a href="../RailsApp/Entrypoints.html#domain%3AString%7CNil-instance-method">#domain</a></code> and <code><a href="../RailsApp/Entrypoints.html#domains%3AArray%28String%29%7CNil-instance-method">#domains</a></code> are both provided, <code><a href="../RailsApp/Entrypoints.html#domains%3AArray%28String%29%7CNil-instance-method">#domains</a></code> takes precedence.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="domains:Array(String)|Nil-instance-method">
      <div class="signature">
        
        def <strong>domains</strong> : Array(String) | Nil

        <a class="method-permalink" href="#domains%3AArray%28String%29%7CNil-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>The domains your app should be accessible on. This will provision <code><a href="../RailsApp/Entrypoints/Ingress.html">Ingress</a></code> and <code>Certificate</code> resources so that this entrypoint will be reachable via the public internet. Without this property or <code><a href="../RailsApp/Entrypoints.html#domain%3AString%7CNil-instance-method">#domain</a></code>, it will only be accessible via plaintext inside the cluster.</p>
<p>If <code><a href="../RailsApp/Entrypoints.html#domain%3AString%7CNil-instance-method">#domain</a></code> and <code><a href="../RailsApp/Entrypoints.html#domains%3AArray%28String%29%7CNil-instance-method">#domains</a></code> are both provided, <code><a href="../RailsApp/Entrypoints.html#domains%3AArray%28String%29%7CNil-instance-method">#domains</a></code> takes precedence.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="env:Array(Env)-instance-method">
      <div class="signature">
        
        def <strong>env</strong> : Array(<a href="../RailsApp/Entrypoints/Env.html">Env</a>)

        <a class="method-permalink" href="#env%3AArray%28Env%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>A list of <code><a href="../RailsApp/Entrypoints/Env.html">Env</a></code> objects representing environment variables.
Either a <code>value</code> or <code>value_from</code> (in YAML: <code>valueFrom</code>)
<em>must</em> be provided.</p>
<pre><code class="language-yaml">env:
  - name: REDIS_URL
    value: redis://redis
  - name: DATABASE_URL
    valueFrom:
      secretKeyRef:
        name: &quot;postgres-app&quot;
        value: &quot;uri&quot;</code></pre>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="env_from:Array(EnvFrom)-instance-method">
      <div class="signature">
        
        def <strong>env_from</strong> : Array(<a href="../RailsApp/Entrypoints/EnvFrom.html">EnvFrom</a>)

        <a class="method-permalink" href="#env_from%3AArray%28EnvFrom%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>The source of an environment variable, such as a <code>ConfigMap</code> or <code>Secret</code>.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="health_check:HealthCheck|Nil-instance-method">
      <div class="signature">
        
        def <strong>health_check</strong> : <a href="../RailsApp/Entrypoints/HealthCheck.html">HealthCheck</a> | Nil

        <a class="method-permalink" href="#health_check%3AHealthCheck%7CNil-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>HTTP health checks to ensure 2 things:</p>
<ol>
<li>New pods must pass these health checks before old pods are terminated</li>
<li>Pods will be checked on the <code>run_every</code> interval to make sure it's <em>still</em> alive. If it fails <code>failure_threshold</code> times, the pod will be restarted. If it continues to fail, it will enter a <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-restarts"><code>CrashLoopBackOff</code></a> state.</li>
</ol>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="image:String|Nil-instance-method">
      <div class="signature">
        
        def <strong>image</strong> : String | Nil

        <a class="method-permalink" href="#image%3AString%7CNil-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Optional override for the container image for this entrypoint if it differs from the rest of your app. This is useful when you want to deploy something to support your app, such as a Prometheus exporter.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="ingress:Ingress|Nil-instance-method">
      <div class="signature">
        
        def <strong>ingress</strong> : <a href="../RailsApp/Entrypoints/Ingress.html">Ingress</a> | Nil

        <a class="method-permalink" href="#ingress%3AIngress%7CNil-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Properties to assign to any <code><a href="../RailsApp/Entrypoints/Ingress.html">Ingress</a></code> that gets created for this entrypoint.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="name:String-instance-method">
      <div class="signature">
        
        def <strong>name</strong> : String

        <a class="method-permalink" href="#name%3AString-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>The name of your entrypoint, such as <code>web</code> or <code>worker</code></p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="node_selector:Hash(String,JSON::Any)-instance-method">
      <div class="signature">
        
        def <strong>node_selector</strong> : Hash(String, JSON::Any)

        <a class="method-permalink" href="#node_selector%3AHash%28String%2CJSON%3A%3AAny%29-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>A <code>Hash(String, String)</code> containing label/value pairs —
pods for this <code><a href="../RailsApp.html">RailsApp</a></code> or <code><a href="../RailsApp/Entrypoints.html">Entrypoints</a></code> will only be assigned
to nodes that have these labels. For example, if you set
<code>kubernetes.io/arch: arm64</code> here, pods will only be assigned
to nodes running Arm64 processors.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="path:String-instance-method">
      <div class="signature">
        
        def <strong>path</strong> : String

        <a class="method-permalink" href="#path%3AString-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>The path matcher for the <code><a href="../RailsApp/Entrypoints/Ingress.html">Ingress</a></code> resource, defaults to <code>&quot;/&quot;</code>. All incoming requests from outside the cluster with this entrypoint's <code><a href="../RailsApp/Entrypoints.html#domain%3AString%7CNil-instance-method">#domain</a></code> and <code><a href="../RailsApp/Entrypoints.html#path%3AString-instance-method">#path</a></code> will be routed to this entrypoint.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="path_type:String-instance-method">
      <div class="signature">
        
        def <strong>path_type</strong> : String

        <a class="method-permalink" href="#path_type%3AString-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Defines the way the <code><a href="../RailsApp/Entrypoints.html#path%3AString-instance-method">#path</a></code> is matched, defaulting to <code>Prefix</code>.</p>
<ul>
<li><code>Prefix</code> matches any request path that starts with <code><a href="../RailsApp/Entrypoints.html#path%3AString-instance-method">#path</a></code></li>
<li><code>Exact</code> matches only that exact path</li>
<li><code>ImplementationSpecific</code> depends on the Kubernetes <code>IngressClass</code>. This operator uses <code>nginx</code> as the <code>IngressClass</code>, which <code>ImplementationSpecific</code> <a href="https://kubernetes.github.io/ingress-nginx/faq/#validation-of-path">here</a>.</li>
</ul>
<pre><code class="language-crystal">entrypoints:
<span class="o">-</span> name: web
  domain: example.com
  path: <span class="o">/</span></code></pre>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="port:Int64|Nil-instance-method">
      <div class="signature">
        
        def <strong>port</strong> : Int64 | Nil

        <a class="method-permalink" href="#port%3AInt64%7CNil-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>The port your entrypoint will be listening on. This will provision a <code>Service</code> resource so the entrypoint will be reachable from inside the Kubernetes cluster.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="replicas:Int64-instance-method">
      <div class="signature">
        
        def <strong>replicas</strong> : Int64

        <a class="method-permalink" href="#replicas%3AInt64-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>The number of pods to run for this entrypoint, defaulting to <code>1</code>.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="resources:Resources|Nil-instance-method">
      <div class="signature">
        
        def <strong>resources</strong> : <a href="../RailsApp/Entrypoints/Resources.html">Resources</a> | Nil

        <a class="method-permalink" href="#resources%3AResources%7CNil-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>The resources you want to allocate for each pod and/or limit each pod to.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  
    <div class="entry-detail" id="service_account:String|Nil-instance-method">
      <div class="signature">
        
        def <strong>service_account</strong> : String | Nil

        <a class="method-permalink" href="#service_account%3AString%7CNil-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Use the given Kubernetes <code>ServiceAccount</code> to run pods for this app. This is extremely rare to need to set, so if you don't know what to set here, you almost certainly want to leave it blank.</p>
        </div>
      
      <br/>
      <div>
        
      </div>
    </div>
  


</div>

</body>
</html>
